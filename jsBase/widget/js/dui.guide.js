!function(a){var b="previous",c="skip",d="next";a.widget("dui.guide",{version:"1.0.0",widgetName:"guide",widgetEventPrefix:"guide",options:{steps:{},showUsedPage:!0,confirm:a.empty,close:a.empty},_stack:[],_create:function(){this.titlesSpan=this.element.find(".guide_title .titleCon"),this.guidePage=this.element.find(".guide_content .guide_page"),this.buttons=this.options.buttons||this.element.find(".guide_Btn"),this._stack.length=0,this._setupEvents()},show:function(a){this._stack.length=0,this._toNewPage(a)},showPrevious:function(){var a=this._stack;a.length>1&&(this._leavePage(!0),a.pop(),this._toNewPage(a.pop()))},_toNewPage:function(b){var c,d,e=this._stack,f=this.options.steps,g=f&&f[b];this.options.showUsedPage||this.titlesSpan.removeClass("current"),c=this.titlesSpan.filter("[name="+b+"]").addClass("current"),d=this.guidePage.removeClass("current").filter("[name="+b+"]").addClass("current"),this.element.find(".u-tip-container").hide(),g&&(a.isFunction(g.pageShow)&&g.pageShow(d,c),this._showButtons(g.buttons)),d.length&&e.push(b)},_showButtons:function(a){var b="[data-action="+a.join("],[data-action=")+"]";this.buttons.find("[data-action]").hide().filter(b).show()},_leavePage:function(e,f){var g,h,i,j=this._stack,k=this.options.steps,l=j[j.length-1],m=null,n=e?b:f?c:d,o=this,p=a.Deferred();if(l){m=k&&k[l],g=this.titlesSpan.filter("[name="+l+"]"),h=this.guidePage.filter("[name="+l+"]"),(e||m)&&a.isFunction(m.pageLeave)&&(i=m.pageLeave(n,h,g));var q=function(b){return b!==!1&&(o.options.showUsedPage||g.removeClass("current"),h.removeClass("current"),"string"!==a.type(b)&&(b=h.next().attr("name"))),b};return a.isDeferred(i)?i.always(function(a){p.resolve(q(a))}):p.resolve(q(i)),p.promise()}return p.resolve("").promise()},_setupEvents:function(){this._on(this.buttons,this._buttonEvents),this._on(this._handleEvents)},_buttonEvents:{"click [data-action=back]":function(){this.showPrevious()},"click [data-action=next]":function(){var a=this._leavePage(!1,!1),b=this;a.done(function(a){!!a!=!1&&b._toNewPage(a)})},"click [data-action=skip]":function(){var a=this._leavePage(!1,!0),b=this;a.done(function(a){!!a!=!1&&b._toNewPage(a)})},"click [data-action=confirm]":function(){this._trigger("confirm")},"click [data-action=close]":function(){this._trigger("close")}},_handleEvents:{}})}(jQuery);